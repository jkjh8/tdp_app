"use strict";(globalThis["webpackChunktdp_ui"]=globalThis["webpackChunktdp_ui"]||[]).push([[394],{6394:(e,l,o)=>{o.r(l),o.d(l,{default:()=>se});var a=o(9835),n=o(499),s=o(9302),t=o(6970),i=o(4182),r=o(5575),d=o(1569);const c=e=>((0,a.dD)("data-v-3babcd1e"),e=e(),(0,a.Cn)(),e),p={class:"row no-wrap items-center q-pa-sm q-gutter-xs"},u={class:"col q-px-sm"},m=c((()=>(0,a._)("div",{class:"q-uploader__title"},"Upload Files",-1))),g={class:"q-uploader__subtitle"},w={__name:"filesUploader",setup(e){const l=(0,s.Z)(),{dialogRef:o,onDialogOK:c,onDialogCancel:w}=(0,i.Z)(),_=()=>`${d.addr}/api/files/upload`,f=e=>{l.notify({type:"negative",message:`${e.length} file(s) did not pass validation constraints`})};return(e,l)=>{const s=(0,a.up)("q-btn"),i=(0,a.up)("q-spinner"),d=(0,a.up)("q-uploader-add-trigger"),w=(0,a.up)("q-uploader"),k=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(k,{ref_key:"dialogRef",ref:o,persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"uploader",multiple:"",url:_,"field-name":e=>encodeURIComponent(e.name),color:"blue-grey-8",accept:"image/*, video/*, audio/*",onRejected:f},{header:(0,a.w5)((e=>[(0,a._)("div",p,[e.queuedFiles.length>0?((0,a.wg)(),(0,a.j4)(s,{key:0,round:"",dense:"",flat:"",icon:"clear_all",onClick:e.removeQueuedFiles},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(r.Z),{msg:"Clear All"})])),_:2},1032,["onClick"])):(0,a.kq)("",!0),e.uploadedFiles.length>0?((0,a.wg)(),(0,a.j4)(s,{key:1,round:"",dense:"",flat:"",icon:"done_all",onClick:e.removeUploadedFiles},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(r.Z),{msg:"Remove Uploaded Files"})])),_:2},1032,["onClick"])):(0,a.kq)("",!0),e.isUploading?((0,a.wg)(),(0,a.j4)(i,{key:2,class:"q-uploader__spinner"})):(0,a.kq)("",!0),(0,a._)("div",u,[m,(0,a._)("div",g,(0,t.zw)(e.uploadSizeLabel)+" / "+(0,t.zw)(e.uploadProgressLabel),1)]),e.canAddFiles?((0,a.wg)(),(0,a.j4)(s,{key:3,round:"",dense:"",flat:"",type:"a",icon:"add_box",onClick:e.pickFiles},{default:(0,a.w5)((()=>[(0,a.Wm)(d),(0,a.Wm)((0,n.SU)(r.Z),{msg:"Pick Files"})])),_:2},1032,["onClick"])):(0,a.kq)("",!0),e.canUpload?((0,a.wg)(),(0,a.j4)(s,{key:4,round:"",dense:"",flat:"",icon:"cloud_upload",onClick:e.upload},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(r.Z),{msg:"Upload Files"})])),_:2},1032,["onClick"])):(0,a.kq)("",!0),e.isUploading?((0,a.wg)(),(0,a.j4)(s,{key:5,round:"",dense:"",flat:"",icon:"clear",onClick:e.abort},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(r.Z),{msg:"Abrot Upload"})])),_:2},1032,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(s,{dense:"",round:"",flat:"",color:"blue-grey-2",icon:"close",onClick:(0,n.SU)(c)},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(r.Z),{msg:"Close"})])),_:1},8,["onClick"])])])),_:1},8,["field-name"])])),_:1},512)}}};var _=o(1639),f=o(3706),k=o(5918),q=o(4455),b=o(3940),C=o(6246),U=o(9984),Z=o.n(U);const y=(0,_.Z)(w,[["__scopeId","data-v-3babcd1e"]]),v=y;Z()(w,"components",{QDialog:f.Z,QUploader:k.Z,QBtn:q.Z,QSpinner:b.Z,QUploaderAddTrigger:C.Z});const W=(0,n.iH)([]),S=(0,n.iH)(""),Q=[{name:"name",label:"Name",field:"name",align:"center",sortable:!0},{name:"type",label:"Type",field:"type",align:"center",sortable:!0},{name:"size",label:"Size",field:"size",align:"center",sortable:!0},{name:"actions",label:"Actions",align:"center"}],h=async()=>{const e=await d.api.get("/files");return W.value=e.data.files,S.value=e.data.defaultpath,console.log("files updated: ",W.value),e},z={class:"row justify-between"},F={class:"row no-wrap items-center q-gutter-x-sm"},x=(0,a._)("div",null,"Local Files",-1),j={__name:"FilesHeader",setup(e){const l=(0,s.Z)(),o=()=>{l.dialog({component:v}).onOk((()=>{h()}))};return(e,l)=>{const s=(0,a.up)("q-icon"),t=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",z,[(0,a._)("div",F,[(0,a.Wm)(s,{color:"yellow-8",size:"sm",name:"folder"}),x]),(0,a._)("div",null,[(0,a.Wm)(t,{flat:"",round:"",color:"primary",icon:"cloud_uploadf",onClick:o},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(r.Z),{msg:"Upload Files"})])),_:1})])])}}};var D=o(2857);const R=j,T=R;Z()(j,"components",{QIcon:D.Z,QBtn:q.Z});var A=o(321);const P={class:"q-px-sm row no-wrap items-center"},L=(0,a._)("div",{style:{"font-size":"1rem"}},"Delete File",-1),B={class:"q-px-sm"},I={class:"q-px-sm"},O={__name:"deleteFile",props:{current:String},emits:[...i.Z.emits],setup(e,{emit:l}){const{dialogRef:o,onDialogCancel:s,onDialogOK:r}=(0,i.Z)();return(l,i)=>{const d=(0,a.up)("q-icon"),c=(0,a.up)("q-card-section"),p=(0,a.up)("q-btn"),u=(0,a.up)("q-card-actions"),m=(0,a.up)("q-card"),g=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(g,{ref_key:"dialogRef",ref:o},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"q-dialog-plugin"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a._)("div",P,[(0,a.Wm)(d,{name:"delete",size:"20px",color:"red-10"}),L])])),_:1}),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a._)("div",B,[(0,a._)("div",null,(0,t.zw)(e.current),1)])])),_:1}),(0,a.Wm)(u,{align:"right"},{default:(0,a.w5)((()=>[(0,a._)("div",I,[(0,a.Wm)(p,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,n.SU)(s)},null,8,["onClick"]),(0,a.Wm)(p,{round:"",flat:"",color:"primary",icon:"check_circle",onClick:(0,n.SU)(r)},null,8,["onClick"])])])),_:1})])),_:1})])),_:1},512)}}};var H=o(4458),K=o(3190),$=o(1821);const G=O,M=G;Z()(O,"components",{QDialog:f.Z,QCard:H.Z,QCardSection:K.Z,QIcon:D.Z,QCardActions:$.Z,QBtn:q.Z});var N=o(3910);const E={class:"q-gutter-x-sm"},J={__name:"FilesList",setup(e){const l=(0,s.Z)(),{humanStorageSize:o}=A["default"],i=e=>{l.dialog({component:M,componentProps:{current:e.base}}).onOk((async()=>{try{l.loading.show();const o=await d.api.delete("/files",{params:{...e}});console.log(o),await h(),l.loading.hide()}catch(o){l.loading.hide(),console.error(o)}}))};return(e,l)=>{const s=(0,a.up)("q-td"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-tr"),p=(0,a.up)("q-table");return(0,a.wg)(),(0,a.j4)(p,{"table-header-class":"bg-grey-3",rows:(0,n.SU)(W),columns:(0,n.SU)(Q),pagination:{rowsPerPage:0},"hide-pagination":"","wrap-cells":""},{body:(0,a.w5)((e=>[(0,a.Wm)(c,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{key:"name",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,a.Wm)(s,{key:"type",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(e.row.ext.substring(1).toUpperCase()),1)])),_:2},1032,["props"]),(0,a.Wm)(s,{key:"size",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)((0,n.SU)(o)(e.row.size)),1)])),_:2},1032,["props"]),(0,a.Wm)(s,{key:"actions",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",E,[(0,a.Wm)(d,{round:"",flat:"",icon:"input",size:"sm",color:"primary",onClick:l=>(0,n.SU)(N.GM)(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(r.Z),{msg:"Load"})])),_:2},1032,["onClick"]),(0,a.Wm)(d,{round:"",flat:"",icon:"delete",size:"sm",color:"red",onClick:l=>i(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(r.Z),{msg:"Delete"})])),_:2},1032,["onClick"])])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])}}};var V=o(7580),X=o(3532),Y=o(7220);const ee=J,le=ee;Z()(J,"components",{QTable:V.Z,QTr:X.Z,QTd:Y.Z,QBtn:q.Z});const oe={class:"q-pa-md"},ae={__name:"FilesPage",setup(e){return(0,a.wF)((async()=>{console.log(await h())})),(e,l)=>{const o=(0,a.up)("q-card-section"),s=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)("div",oe,[(0,a.Wm)(s,{class:"bg-grey-1",flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{class:"q-pb-none q-mb-none"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(T))])),_:1}),(0,a.Wm)(o,{class:"q-pt-xs q-mt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(le),{class:"gt-xs"})])),_:1})])),_:1})])}}},ne=ae,se=ne;Z()(ae,"components",{QCard:H.Z,QCardSection:K.Z})}}]);