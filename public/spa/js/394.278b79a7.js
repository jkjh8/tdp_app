"use strict";(globalThis["webpackChunktdp_ui"]=globalThis["webpackChunktdp_ui"]||[]).push([[394],{6394:(e,l,a)=>{a.r(l),a.d(l,{default:()=>se});var o=a(9835),n=a(499),s=a(9302),t=a(6970),i=a(4182),r=a(5575),d=a(1569);const c=e=>((0,o.dD)("data-v-0cfa3fbc"),e=e(),(0,o.Cn)(),e),p={class:"row no-wrap items-center q-pa-sm q-gutter-xs"},u={class:"col q-px-sm"},m=c((()=>(0,o._)("div",{class:"q-uploader__title"},"Upload Files",-1))),g={class:"q-uploader__subtitle"},w={__name:"filesUploader",setup(e){const l=(0,s.Z)(),{dialogRef:a,onDialogOK:c,onDialogCancel:w}=(0,i.Z)(),f=()=>`${d.addr}/api/files/upload`,_=e=>{l.notify({type:"negative",message:`${e.length} file(s) did not pass validation constraints`})};return(e,l)=>{const s=(0,o.up)("q-btn"),i=(0,o.up)("q-spinner"),d=(0,o.up)("q-uploader-add-trigger"),w=(0,o.up)("q-uploader"),k=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(k,{ref_key:"dialogRef",ref:a,persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"uploader",multiple:"",url:f,"field-name":e=>encodeURIComponent(e.name),color:"blue-grey-8",accept:".mkv,image/*, video/*, audio/*",onRejected:_},{header:(0,o.w5)((e=>[(0,o._)("div",p,[e.queuedFiles.length>0?((0,o.wg)(),(0,o.j4)(s,{key:0,round:"",dense:"",flat:"",icon:"clear_all",onClick:e.removeQueuedFiles},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(r.Z),{msg:"Clear All"})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),e.uploadedFiles.length>0?((0,o.wg)(),(0,o.j4)(s,{key:1,round:"",dense:"",flat:"",icon:"done_all",onClick:e.removeUploadedFiles},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(r.Z),{msg:"Remove Uploaded Files"})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),e.isUploading?((0,o.wg)(),(0,o.j4)(i,{key:2,class:"q-uploader__spinner"})):(0,o.kq)("",!0),(0,o._)("div",u,[m,(0,o._)("div",g,(0,t.zw)(e.uploadSizeLabel)+" / "+(0,t.zw)(e.uploadProgressLabel),1)]),e.canAddFiles?((0,o.wg)(),(0,o.j4)(s,{key:3,round:"",dense:"",flat:"",type:"a",icon:"add_box",onClick:e.pickFiles},{default:(0,o.w5)((()=>[(0,o.Wm)(d),(0,o.Wm)((0,n.SU)(r.Z),{msg:"Pick Files"})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),e.canUpload?((0,o.wg)(),(0,o.j4)(s,{key:4,round:"",dense:"",flat:"",icon:"cloud_upload",onClick:e.upload},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(r.Z),{msg:"Upload Files"})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),e.isUploading?((0,o.wg)(),(0,o.j4)(s,{key:5,round:"",dense:"",flat:"",icon:"clear",onClick:e.abort},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(r.Z),{msg:"Abrot Upload"})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(s,{dense:"",round:"",flat:"",color:"blue-grey-2",icon:"close",onClick:(0,n.SU)(c)},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(r.Z),{msg:"Close"})])),_:1},8,["onClick"])])])),_:1},8,["field-name"])])),_:1},512)}}};var f=a(1639),_=a(3706),k=a(5918),q=a(4455),b=a(3940),C=a(6246),U=a(9984),Z=a.n(U);const y=(0,f.Z)(w,[["__scopeId","data-v-0cfa3fbc"]]),v=y;Z()(w,"components",{QDialog:_.Z,QUploader:k.Z,QBtn:q.Z,QSpinner:b.Z,QUploaderAddTrigger:C.Z});const W=(0,n.iH)([]),S=(0,n.iH)(""),Q=[{name:"name",label:"Name",field:"name",align:"center",sortable:!0},{name:"type",label:"Type",field:"type",align:"center",sortable:!0},{name:"size",label:"Size",field:"size",align:"center",sortable:!0},{name:"actions",label:"Actions",align:"center"}],h=async()=>{const e=await d.api.get("/files");return W.value=e.data.files,S.value=e.data.defaultpath,e},z={class:"row justify-between"},F={class:"row no-wrap items-center q-gutter-x-sm"},x=(0,o._)("div",null,"Local Files",-1),j={__name:"FilesHeader",setup(e){const l=(0,s.Z)(),a=()=>{l.dialog({component:v}).onOk((()=>{h()}))};return(e,l)=>{const s=(0,o.up)("q-icon"),t=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",z,[(0,o._)("div",F,[(0,o.Wm)(s,{color:"yellow-8",size:"sm",name:"folder"}),x]),(0,o._)("div",null,[(0,o.Wm)(t,{flat:"",round:"",color:"primary",icon:"cloud_uploadf",onClick:a},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(r.Z),{msg:"Upload Files"})])),_:1})])])}}};var D=a(2857);const R=j,T=R;Z()(j,"components",{QIcon:D.Z,QBtn:q.Z});var A=a(321);const P={class:"q-px-sm row no-wrap items-center"},L=(0,o._)("div",{style:{"font-size":"1rem"}},"Delete File",-1),B={class:"q-px-sm"},I={class:"q-px-sm"},O={__name:"deleteFile",props:{current:String},emits:[...i.Z.emits],setup(e,{emit:l}){const{dialogRef:a,onDialogCancel:s,onDialogOK:r}=(0,i.Z)();return(l,i)=>{const d=(0,o.up)("q-icon"),c=(0,o.up)("q-card-section"),p=(0,o.up)("q-btn"),u=(0,o.up)("q-card-actions"),m=(0,o.up)("q-card"),g=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(g,{ref_key:"dialogRef",ref:a},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"q-dialog-plugin"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",P,[(0,o.Wm)(d,{name:"delete",size:"20px",color:"red-10"}),L])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",B,[(0,o._)("div",null,(0,t.zw)(e.current),1)])])),_:1}),(0,o.Wm)(u,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",I,[(0,o.Wm)(p,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,n.SU)(s)},null,8,["onClick"]),(0,o.Wm)(p,{round:"",flat:"",color:"primary",icon:"check_circle",onClick:(0,n.SU)(r)},null,8,["onClick"])])])),_:1})])),_:1})])),_:1},512)}}};var H=a(4458),K=a(3190),$=a(1821);const G=O,M=G;Z()(O,"components",{QDialog:_.Z,QCard:H.Z,QCardSection:K.Z,QIcon:D.Z,QCardActions:$.Z,QBtn:q.Z});var N=a(3910);const E={class:"q-gutter-x-sm"},J={__name:"FilesList",setup(e){const l=(0,s.Z)(),{humanStorageSize:a}=A["default"],i=e=>{l.dialog({component:M,componentProps:{current:e.base}}).onOk((async()=>{try{l.loading.show();const a=await d.api.delete("/files",{params:{...e}});console.log(a),await h(),l.loading.hide()}catch(a){l.loading.hide(),console.error(a)}}))};return(e,l)=>{const s=(0,o.up)("q-td"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-tr"),p=(0,o.up)("q-table");return(0,o.wg)(),(0,o.j4)(p,{"table-header-class":"bg-grey-3",rows:(0,n.SU)(W),columns:(0,n.SU)(Q),pagination:{rowsPerPage:0},"hide-pagination":"","wrap-cells":""},{body:(0,o.w5)((e=>[(0,o.Wm)(c,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{key:"name",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(s,{key:"type",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.ext.substring(1).toUpperCase()),1)])),_:2},1032,["props"]),(0,o.Wm)(s,{key:"size",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)((0,n.SU)(a)(e.row.size)),1)])),_:2},1032,["props"]),(0,o.Wm)(s,{key:"actions",props:e},{default:(0,o.w5)((()=>[(0,o._)("div",E,[(0,o.Wm)(d,{round:"",flat:"",icon:"input",size:"sm",color:"primary",onClick:l=>(0,n.SU)(N.GM)(e.row)},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(r.Z),{msg:"Load"})])),_:2},1032,["onClick"]),(0,o.Wm)(d,{round:"",flat:"",icon:"delete",size:"sm",color:"red",onClick:l=>i(e.row)},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(r.Z),{msg:"Delete"})])),_:2},1032,["onClick"])])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])}}};var V=a(7580),X=a(3532),Y=a(7220);const ee=J,le=ee;Z()(J,"components",{QTable:V.Z,QTr:X.Z,QTd:Y.Z,QBtn:q.Z});const ae={class:"q-pa-md"},oe={__name:"FilesPage",setup(e){return(0,o.wF)((async()=>{await h()})),(e,l)=>{const a=(0,o.up)("q-card-section"),s=(0,o.up)("q-card");return(0,o.wg)(),(0,o.iD)("div",ae,[(0,o.Wm)(s,{class:"bg-grey-1",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{class:"q-pb-none q-mb-none"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(T))])),_:1}),(0,o.Wm)(a,{class:"q-pt-xs q-mt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(le),{class:"gt-xs"})])),_:1})])),_:1})])}}},ne=oe,se=ne;Z()(oe,"components",{QCard:H.Z,QCardSection:K.Z})}}]);